<!doctype html>
<html>
    <head>
                <title>W2 1 randomness noise customclasses - üëæ DESMA126 Game Engine</title>

            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">

            
            
            

            
                <link  rel="icon" type="image/x-icon" href="../assets/img/favicon.ico">
            
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
                        <script>hljs.initHighlightingOnLoad();</script>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
            <link rel="stylesheet" href="../assets/css/main.min.css">
                <link href="../extra.css" rel="stylesheet">
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
                <script src="../javascripts/config.js"></script>
                <script src="../search/main.js"></script>

            
                
            
    </head>

    <body>
        <div class="container py-3">
            <header>
                    <!-- block header -->
<nav class="navbar navbar-expand-xl border-bottom">
    <div class="container-fluid">
        

        
            <span class=" fs-4 title-color site-name" id="component-site-name" style="text-transform: uppercase;">üëæ DESMA126 Game Engine</span>
        

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMenu"
            aria-controls="navbarsMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse flex-column ml-auto" id="navbarsMenu">
            <ul class="navbar-nav">

                <!-- block menu -->
                <li class="nav-item">
                    <!-- block menu -->
    
        <li class="nav-item" id="component-menu">
            <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="
                            nav-link text-gray text-decoration-none" href="..">[üè† Home]</a>
                        </li>
                        <li class="nav-item">
                            <a class="
                            nav-link text-gray text-decoration-none" href="../syllabus/">[üìú Syllabus]</a>
                        </li>
                        <li class="nav-item">
                            <a class="
                            nav-link text-gray text-decoration-none" href="../schedule/">[üìÖ Schedule]</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="
                            nav-link dropdown-toggle text-decoration-none" href="#" data-bs-toggle="dropdown">[üìå Assignments]</a>
                            <ul class="dropdown-menu">
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../how-to-submit/" class="dropdown-item text-decoration-none ">How To Submit</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../readings-and-homeplays/" class="dropdown-item text-decoration-none ">Readings & Homeplays</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../project-1/" class="dropdown-item text-decoration-none ">Project 1</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../project-2/" class="dropdown-item text-decoration-none ">Project 2</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../project-3/" class="dropdown-item text-decoration-none ">Project 3</a>
    </li>
<!-- endblock -->
                            </ul>
                        </li>
            </ul>
        </li>
<!-- endblock -->
                </li>
                <!-- endblock -->

                <!-- block search -->
                <li class="nav-item">
                    <a class="collapsed" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                        <div class="md-search-icon">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </div>
                    </a>
                </li>
                <!--  endblock -->

                <!-- block source -->
                <li class="nav-item">
                    
                </li>
                <!--  endblock -->
            </ul>
        </div>
    </div>
</nav>
<!--  endblock -->
            </header>

            <main><!-- block search -->
<div class="collapse" id="collapseExample">
    <div role="search" class="search-box">
        <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <input type="text" name="q" class="search-query"
            placeholder="Search docs" title="Type search term here" />
        </form>
    </div>
</div>
<!-- endblock -->
                    <!-- block content -->
<section class="container post">
    <article>
        <header>
            
            
        </header>
        <p><script>hljs.highlightAll();</script>

<h1 id="randomness-noise-custom-classes-for-storing-data">Randomness, Noise, Custom Classes for Storing Data</h1>
<hr />
<p>üì¶ <strong>Unity packages from today's class:</strong></p>
<blockquote>
<ul>
<li><a href="https://drive.google.com/file/d/1HC1tOnao0y_MKTLlgBbiiocQBjpJaId2/view?usp=sharing"><strong>Perlin Noise for Animation and Terrain Generation</strong></a></li>
<li><a href="https://drive.google.com/file/d/1urb4VHbFvDKvS02d1IS7qVpusmFXUJlp/view?usp=drive_link"><strong>Using Scripts for Storing Data</strong></a><ul>
<li>Spawning Objects at Random Positions without Repeats</li>
<li>Colour Scheme Randomizer</li>
</ul>
</li>
</ul>
</blockquote>
<hr />
<p>Before we begin...</p>
<p><br></p>
<h2 id="review-from-last-class">Review from last class</h2>
<ul>
<li>Prefabs and Instantiation<ul>
<li>Creating a prefab</li>
<li>Instantiate() method</li>
</ul>
</li>
<li>Arrays<ul>
<li>How to declare and initialise arrays</li>
<li>How to get an element from an array</li>
</ul>
</li>
<li>Random.Range()</li>
</ul>
<p><br></p>
<hr />
<h2 id="randomness">Randomness</h2>
<p>Sometimes we want to randomize the behaviour of our game, for procedurally generating levels, for adding variation to the behavior of NPCs, and more.</p>
<p><br></p>
<h3 id="randomrange">Random.Range</h3>
<blockquote>
<p>Read about <a href="https://docs.unity3d.com/ScriptReference/Random.Range.html">Random.Range</a> in the Unity Scripting API.</p>
</blockquote>
<p>There are two versions of Random.Range: </p>
<ul>
<li>one that returns <strong>a random float</strong> within a minimum <em>inclusive</em> float and maximum <em>inclusive</em> float; <br> <br> <em>Note: you can make any number a float by adding an 'f' at the end.</em><pre><code class="language-csharp hljs">float randomFloat = Random.Range(0.5f, 2.5f);
// returns a random float between 0.5 and 2.5, including 0.5 and 2.5
</code></pre><pre><code class="language-csharp hljs">float randomFloat = Random.Range(2f, 4f);
// returns a random float between 2 and 4, including 2 and 4.
</code></pre><br></li>
<li>and one that returns <strong>a random integer</strong> within a minimum <em>inclusive</em> integer and maximum <em>exclusive</em> integer. <pre><code class="language-csharp hljs">int randomInteger = Random.Range(0, 3);
// returns a random integer between 0 and 3, including 0 but excluding 3,
// ie. possible outcomes are 0, 1, and 2.
</code></pre><br></li>
</ul>
<h4 id="using-randomrange-with-conditional-statements">Using Random.Range with Conditional Statements</h4>
<p>We can use <strong>Random.Range</strong> and <strong>conditional statements</strong> to determine what actions happen depending on the random output number, as well as the probability of each outcome. </p>
<p><br></p>
<p>For example, a coin toss can be set up using <strong>a random integer</strong>...</p>
<pre><code class="language-csharp">int coinToss = Random.Range(0,2);
// the only possible outcomes are 0 and 1.

if (coinToss == 0){
    Debug.Log(&quot;Heads&quot;);
} else { // if coinToss == 1
    Debug.Log(&quot;Tails&quot;);
}
</code></pre>
<p><br></p>
<p>... or <strong>a random float</strong>. Both are doing the exact same thing, because the probability of either outcome is exactly the same (50% chance).</p>
<pre><code class="language-csharp">float coinToss = Random.Range(0f,1f);
// outcome can be any decimal number between 0 to 1, including 0 and 1.

if (coinToss &gt; 0.5f){ // if coinToss is more than 0.5f
    Debug.Log(&quot;Heads&quot;);
} else { // if coinToss is less than or equal to 0.5f
    Debug.Log(&quot;Tails&quot;);
}
</code></pre>
<p><br></p>
<p>You can also set up your outcomes with <strong>an uneven probability</strong>.</p>
<pre><code class="language-csharp">float badCoin = Random.Range(0f,1f);

if (badCoin &gt; 0.7f){ // if coinToss is more than 0.7f
    Debug.Log(&quot;Heads&quot;); // this has a 30% chance of happening
} else { // if coinToss is less than or equal to 0.7f
    Debug.Log(&quot;Tails&quot;); // this has a 70% chance of happening 
}
</code></pre>
<p><br></p>
<p>The above examples use <strong>if-else statements</strong> to select which actions to run based on what the random number is. </p>
<p><br></p>
<p>You can also use <strong>switch statements</strong>, which are helpful for working with <strong>a longer list of possible outcomes</strong>. This is because switch statements evaluate all possible outcomes and proceed immediately to the relevant "case" index, instead of evaluating the conditions one by one according to the order listed in an "if-else" chain.</p>
<p>Switch statements will look at one variable (placed inside the parentheses), and switch across different listed outcomes (each listed as a <code>case</code> index) until it finds one that matches the current value. Each case must end off with a <code>break;</code> statement to exit the loop.</p>
<pre><code class="language-csharp">int diceRoll = Random.Range(1,7);
//possible outcomes are 1, 2, 3, 4, 5, and 6.

switch (diceRoll)
{
    case 1: // if diceRoll == 1
        Debug.Log(&quot;Rolled a 1.&quot;);
        break; // exit loop

    case 2: // if diceRoll == 2
        Debug.Log(&quot;Rolled a 2.&quot;);
        break; // exit loop

    //etc...

    case 6: // if diceRoll == 6
        Debug.Log(&quot;Rolled a 6.&quot;);
        break; // exit loop

    default: //acts like an &quot;else&quot; statement to catch all other outcomes not listed above.
        Debug.Error(&quot;Invalid roll number.&quot;);
        break; // exit loop
}
</code></pre>
<p><br></p>
<h4 id="using-randomrange-with-arrays">Using Random.Range with Arrays</h4>
<p>You can use Random.Range (for random integers) to <strong>pick elements out of an array at random</strong> by using the length of the array as the second argument. </p>
<pre><code class="language-csharp">string[] names = new string[]{&quot;alfred&quot;,&quot;bruno&quot;, &quot;cynthia&quot;,&quot;dianne&quot;,&quot;esther&quot;};
int pick = Random.Range(0, names.Length);
Debug.Log(names[pick]); //prints one of the names in the array at random.
</code></pre>
<p><br></p>
<hr />
<h2 id="noise">Noise</h2>
<p>We will learn about two kinds of noise: <strong>random noise</strong> and <strong>perlin noise</strong></p>
<p><br> </p>
<h3 id="random-noise">Random Noise</h3>
<p>In random noise, the values generated are <strong>completely random</strong> and have <strong>no correlation to one another</strong>. This creates a very grainy and chaotic texture.</p>
<figure>
    <img src="../img/noise-random.png" alt="random noise">
    <figcaption>
        -- Noise made with random noise
    </figcaption>
</figure>

<p><br> </p>
<p>And because the random values are independent of one another, if we were to transfer one area of random noise onto another (with all other parameters kept the same), it blends in seamlessly. </p>
<figure>
    <img src="../img/noise-random-move.gif" alt="moving random noise from one area to another">
    <figcaption>
        -- Random noise feels uninterrupted regardless of the transposition of values.
    </figcaption>
</figure>

<p><br> </p>
<h3 id="perlin-noise">Perlin Noise</h3>
<blockquote>
<p>If you're curious about the mathematical logic behind perlin noise generation, I recommend watching this Youtube video, <a href="https://youtu.be/MJ3bvCkHJtE?feature=shared&amp;t=405">Perlin Noise Explained</a> (start from 06:45). </p>
</blockquote>
<p>Sometimes in computer graphics, we want to use seemingly random values that are smoothly interpolated across one another. In these situations, we could get "smooth" random values with <strong>Perlin Noise</strong>.</p>
<figure>
    <img src="../img/noise-perlin.png" alt="perlin noise">
    <figcaption>
        -- Noise made with perlin noise
    </figcaption>
</figure>

<p><br></p>
<p>In perlin noise, <strong>neighbouring values are related to each other</strong> through the smooth interpolation from one area to another. Therefore, if we were to move one area of perlin noise onto another, the smooth interpolation is disrupted, and we can clearly see where one area starts and ends. </p>
<figure>
    <img src="../img/noise-perlin-move.gif" alt="moving perlin noise from one area to another">
    <figcaption>
        -- Transposition of values becomes very clear in perlin noise.
    </figcaption>
</figure>

<p><br></p>
<h3 id="mathfperlinnoise">Mathf.PerlinNoise</h3>
<blockquote>
<p>Read about <a href="https://docs.unity3d.com/ScriptReference/Mathf.PerlinNoise.html">Mathf.PerlinNoise</a> in the Unity Scripting API.</p>
</blockquote>
<p>In Unity, we can use <strong>Mathf.PerlinNoise</strong> to generate Perlin noise across a 2D plane. </p>
<p>To use this method, we pass <strong>two sample points along the X and Y axes in floats</strong> into the function, and it will return <strong>a float value between approaximately 0 and 1</strong> which corresponds to the colour of the noise in those exact coordinates (Black is 0; White is 1.)</p>
<p><em>(Note: return value might be slightly below 0.0 or beyond 1.0.)</em></p>
<p><br></p>
<h4 id="using-random-seeds-in-perlin-noise">Using Random Seeds in Perlin Noise</h4>
<p>Because Perlin noise is <strong>a pseudo-random pattern</strong> of float values (i.e. it's not <em>truly</em> random), the same sample X and Y coordinates will return the same value. </p>
<p>You can use Random.Range to randomize the X or Y coordinates to sample random parts of the Perlin noise image. </p>
<pre><code class="language-csharp">float randomSeed; 
// Note: 
// A (random) seed is like a starting sample coordinate
// that can be passed into a pseudorandom generator like perlin noise 
// to create a replicable outcome.

void Start()
{
    randomSeedY = Random.Range(0f, 100f);
}

void Update()
{
    float x = Time.time;
    float y = randomSeed;
    float someNoiseValue = Mathf.PerlinNoise(x,y);
}
</code></pre>
<p><br></p>
<h4 id="remapping-output-range-in-perlin-noise">Remapping Output Range in Perlin Noise</h4>
<p>Because the range of values in Perlin noise is limited to 0:1, we typically need to <strong>translate this value to a diferent range</strong>. </p>
<p>For example, you could use a little algebra to remap the noise value range from 0:1 to -1:1:</p>
<pre><code class="language-csharp">float someNoiseValue = Mathf.PerlinNoise(x,y);
float remappedNoise = (someNoiseValue * 2) - 1;
</code></pre>
<p><br></p>
<p>You could also use <a href="https://docs.unity3d.com/ScriptReference/Mathf.Lerp.html">Mathf.Lerp</a> to remap the noise value from 0:1 to a different range of values.</p>
<p>This example below remaps noise to -255:255.</p>
<pre><code class="language-csharp">float noise = Mathf.PerlinNoise(x,y);
float remappedNoise = Mathf.Lerp(-255,255, noise);
</code></pre>
<p><br></p>
<h4 id="animating-perlin-noise-using-timetime">Animating Perlin Noise using Time.time</h4>
<p>We can pass [Time.time] into our x or y-coordinates to "march" across the perlin noise image over time. </p>
<pre><code class="language-csharp">float x, y, someNoiseValue;

void Start(){
    y = 0;
}

void Update(){
    x = Time.time; //Time.time is the amount of time that has passed since the start of the application
    someNoiseValue = Mathf.PerlinNoise(x,y);
}
</code></pre>
<p><br></p>
<p>This value could be passed into any property in your scene (such as y-position) for procedural animation. </p>
<figure>
<img src="../img/noise-perlin-animatedspheres.gif" alt="animating spheres y-position using perlin noise">
<figcaption>-- Perlin noise value is passed into the spheres' y-position; each sphere has their perlin noise sample coordinate offset by an increment of 0.2 in the x-direction.
</figcaption>
</figure>

<p><br></p>
<h4 id="terrain-generation-with-perlin-noise">Terrain Generation with Perlin Noise</h4>
<p>We can pass Perlin noise values into x and y positions to procedurally generate a terrain.</p>
<figure>
<img src="../img/noise-perlin-terrain.jpg" alt="generated terrain using cubes and perlin noise">
<figcaption>-- Terrain generation using cubes and perlin noise.
</figcaption>
</figure>

<pre><code class="language-csharp">public GameObject prefab;

// Start is called before the first frame update
void Start()
{
    int seedX = Random.Range(0, 1000);
    int seedZ = Random.Range(0, 1000);

    for (float z = 0; z &lt; 100; z++)
    { 
        for (float x = 0; x &lt; 100; x++)
        {
            float y = Mathf.PerlinNoise((x+seedX) * 0.1f, (z+seedZ) * 0.1f) * 2f;

            if (y &gt; 1) //threshold, only spawn when y is greater than 1
            {

                GameObject instance = Instantiate(prefab);
                instance.transform.position = new Vector3(x, y*10, z);
            }
        }
    }
}
</code></pre>
<p><br></p>
<hr />
<h2 id="custom-classes-for-storing-data">Custom Classes for Storing Data</h2>
<p>Review from <a href="../w0-unity-csharp/#unity-c">our first introduction of C#</a>:</p>
<blockquote>
<p>We typically write Unity C# scripts to <strong>make customised blueprints for accessing, organising, and implementing data</strong> inside our game project. This is helpful for:</p>
<ul>
<li>storing information such as variables and functions inside an object or class;</li>
<li>programming interactive / dynamic behaviour in objects;</li>
</ul>
</blockquote>
<p>Sometimes we need to write <strong>custom classes to store data and functions</strong> about specific objects.</p>
<p>For example, we could have a class that describes specific properties of an object. </p>
<pre><code class="language-csharp">public class Cat
{
    public string name;
    public string breed;
    public float size;
    public bool hasCollar;
    public Color furColor;
    public Color eyeColor;
}
</code></pre>
<p><br></p>
<p>One way of implementing these custom classes is to use them as <strong>small "helper" classes</strong> inside our scripts.</p>
<p>For example, we may want to create a custom class that contains a variety of colour schemes. </p>
<p>Because we don't need this information to be attached to a GameObject as a component, we can leave it as a non-MonoBehaviour class. In this case, it's useful to mark this class as "serializable", so that the unity editor can see it and edit it.</p>
<p><em>(Note: if your class is already a MonoBehaviour, Unity Editor can already see and edit it, so it does not need to the Serializable attribute.)</em></p>
<pre><code class="language-csharp">[System.Serializable]
public class ColorScheme
{
    public Color mainColor;
    public Color accent;
}
</code></pre>
<p><br></p>
<p>You can include this class in <strong>the same script as one of your MonoBehaviour classes</strong>, or <strong>create a new c# file</strong> to contain it.</p>
<p>From here, we could store a bunch of possible color schemes in a ColorScheme array, then determine the possible color schemes in the Inspector:</p>
<pre><code class="language-csharp">public class ColorSchemeRandomizer:MonoBehaviour
{
    public ColorScheme[] colorSchemes;
    ColorScheme SelectedColorScheme;
    void Start()
    {
        SelectedColorScheme = colorSchemes[Random.Range(0,colorSchemes.Length)];
    }
}

[System.Serializable]
public class ColorScheme
{
    public Color mainColor;
    public Color accent;
}
</code></pre>
<p><br></p>
<hr />
<h2 id="some-course-reminders">Some course reminders</h2>
<ul>
<li><a href="../project-1/">Project 1</a> is due next Monday.</li>
<li>Instructions on <a href="../how-to-submit/">How To Submit</a> your Projects are now updated. </li>
</ul></p>
    </article>
</section>
<!-- endblock -->
            </main>

            
                    <!-- block preview -->
<!-- endblock -->
            

            
                    <!-- block footer -->
<footer class="pt-4 my-md-5 pt-md-5 border-top" id="component-footer">
    <div class="row">
        <div class="col-12 col-md">
                <!-- block copyright -->

    <small class="d-block mb-3">
        Made with
        <a href="https://github.com/FernandoCelmer/mkdocs-simple-blog" target="_blank" rel="noopener">
            Simple Blog for MkDocs
        </a>
    </small>

<!-- endblock -->
        </div>
    </div>
</footer>
<!-- endblock -->
            
        </div>

            <script>var base_url = '..';</script>
            <script src="../assets/js/jquery-3.3.1.slim.min.js""></script>
            <script src="../assets/js/bootstrap.bundle.min.js""></script>
            <script src="../assets/js/main.min.js""></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" defer></script>
                <script src="../javascripts/config.js" defer></script>
                <script src="../search/main.js" defer></script>

    </body>

</html>